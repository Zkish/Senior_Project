<!DOCTYPE html>
<html>
<head>
    <title>Forgot Password</title>
    <link rel="stylesheet" href="forgotpassword.css">
</head>
<body>

    <h2 style="text-align:center;">Forgot Password</h2>
    <p style="text-align:center;">Please enter your email address to reset your password:</p>

    <form action="emailsent.html" id="forgotPasswordForm">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        <input type="submit" value="Send Reset Link">
    </form>

    <script>
        document.getElementById("forgotPasswordForm").addEventListener("submit", async function(event) {
            event.preventDefault();
        
            const email = document.getElementById("email").value;
        
        try {
            const response = await fetch("/check-email", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ email })
            });
        
            const result = await response.json();
        
            if (result.success) {
             
                localStorage.setItem("resetEmail", email);

                alert("Valid Email: Reset Link Will Be Send Soon");
                window.location.href = "emailsent.html";
            } else {
                alert("Invalid Email: Email Does not exist in our database");
            }
          } catch (err) {
            console.error("Error checking email:", err);
            alert("Server Error Please Try Again Later");
          }
        });
        </script>
        

</body>
</html>
